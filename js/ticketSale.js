const showtimes=[{time:"10:00",available:!0},{time:"13:30",available:!0},{time:"16:00",available:!0},{time:"19:00",available:!0},{time:"21:30",available:!0}];function initTicketSale(){const e=document.getElementById("movieSelect"),t=document.getElementById("dateSelect"),n=document.getElementById("timeSelect"),l=document.getElementById("seatMapSection"),a=document.getElementById("seatContainer"),o=document.getElementById("selectedSeats"),i=document.getElementById("seatList"),c=document.getElementById("ticketPrice"),d=document.getElementById("servicePrice"),s=document.getElementById("discountPrice"),r=document.getElementById("totalPrice"),m=document.getElementById("customerType"),u=document.getElementById("ticketQuantity"),v=document.querySelectorAll(".service-checkbox"),h=document.getElementById("paymentBtn");if(!e||!t||!n)return void console.error("Required form elements not found!");function g(){if(!o||!i)return;const e=document.querySelectorAll(".seat.selected");if(e.length>0){const t=Array.from(e).map((e=>e.dataset.seat));i.textContent=t.join(", "),o.classList.remove("d-none"),u&&(u.value=e.length),h&&(h.disabled=!1)}else o.classList.add("d-none"),h&&(h.disabled=!0)}function y(){if(!(c&&d&&s&&r))return;const e=m&&m.options[m.selectedIndex].dataset.price||0,t=u&&parseInt(u.value)||0,n=document.querySelectorAll(".seat.selected").length,l=e*(n>0?n:t);c.textContent=E(l);let a=0;v&&v.forEach((e=>{e.checked&&(a+=parseInt(e.dataset.price)||0)})),d.textContent=E(a),s.textContent="0đ";const o=l+a;r.textContent=E(o)}function E(e){return new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND",maximumFractionDigits:0}).format(e).replace("₫","đ")}console.log("Elements found, adding event listeners..."),t.disabled=!0,n.disabled=!0,e.addEventListener("change",(function(){console.log("Movie selected:",this.value),this.value?(t.disabled=!1,t.value="",n.value="",n.disabled=!0,l&&(l.style.display="none"),y()):(t.disabled=!0,n.disabled=!0,l&&(l.style.display="none"))})),t.addEventListener("change",(function(){console.log("Date selected:",this.value),this.value?(n.disabled=!1,n.innerHTML='<option value="">Chọn giờ...</option>',showtimes.forEach((e=>{const t=document.createElement("option");t.value=e.time,t.textContent=e.time,t.disabled=!e.available,n.appendChild(t)}))):(n.disabled=!0,l&&(l.style.display="none")),y()})),n&&n.addEventListener("change",(function(){console.log("Time selected:",this.value),this.value?(!function(){if(!a)return;a.innerHTML="";const e=["A","B","C","D","E","F","G","H"],t=10,n=[];for(let l=0;l<15;l++){const l=e[Math.floor(Math.random()*e.length)],a=Math.floor(Math.random()*t)+1;n.push(l+a)}e.forEach((e=>{const l=document.createElement("div");l.className="seat-row";const o=document.createElement("div");o.className="row-label",o.textContent=e,l.appendChild(o);for(let a=1;a<=t;a++){const t=document.createElement("div"),o=e+a;t.className="seat",t.dataset.seat=o,t.textContent=o,n.includes(o)?t.classList.add("occupied"):(t.classList.add("available"),t.addEventListener("click",(function(){this.classList.toggle("selected"),g(),y()}))),l.appendChild(t)}a.appendChild(l)}))}(),l&&(l.style.display="block")):l&&(l.style.display="none"),y()})),m&&m.addEventListener("change",y),u&&u.addEventListener("change",y),v&&v.forEach((e=>{e.addEventListener("change",y)}));const p=document.getElementById("applyPromoBtn");p&&p.addEventListener("click",(function(){alert("Chức năng đang được phát triển.")})),h&&h.addEventListener("click",(function(){alert("Đặt vé thành công!")})),console.log("Ticket sale initialization complete!")}export{initTicketSale};