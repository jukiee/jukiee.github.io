import{initCharts}from"./utils/chartUtils.js";import{movieService,foodService,showtimeService,theaterService,customerService,supplierService,promotionService,transactionService,employeeService,statisticsService}from"./services/dataService.js";export function renderHome(){const n=[];for(let t=0;t<5;t++){const a=new Date;a.setDate(a.getDate()+t),n.push({value:a.toISOString().split("T")[0],label:0===t?"Hôm nay":new Intl.DateTimeFormat("vi-VN",{weekday:"long",day:"2-digit",month:"2-digit"}).format(a)})}return`\n        <div class="welcome-section">\n            <h1 class="text-center mb-4">Hệ thống Quản lý Rạp phim</h1>\n            \n            <div class="row mb-4">\n                <div class="col-md-8">\n                    <div class="card">\n                        <div class="card-header bg-primary text-white">\n                            <h5 class="card-title mb-0">Đặt vé nhanh - Phim hot trong tuần</h5>\n                        </div>\n                        <div class="card-body">\n                            <div class="row">\n                                <div class="col-md-6 mb-3">\n                                    <select class="form-select" id="movieSelect">\n                                        <option selected disabled>Chọn phim</option>\n                                        ${movieService.getShowingMovies().map((n=>`<option value="${n.id}">${n.title} - ${n.format}</option>`)).join("")}\n                                    </select>\n                                </div>\n                                <div class="col-md-3 mb-3">\n                                    <select class="form-select" id="dateSelect">\n                                        <option selected disabled>Chọn ngày</option>\n                                        ${n.map((n=>`<option value="${n.value}">${n.label}</option>`)).join("")}\n                                    </select>\n                                </div>\n                                <div class="col-md-3 mb-3">\n                                    <select class="form-select" id="timeSelect">\n                                        <option selected>Chọn giờ</option>\n                                        ${showtimeService.getShowtimesByMovie(movieService.getShowingMovies()[0].id).map((n=>`<option value="${n.time}">${n.time}</option>`)).join("")}\n                                    </select>\n                                </div>\n                            </div>\n                            <button class="btn btn-primary" id="bookTicketBtn">Đặt vé ngay</button>\n                        </div>\n                    </div>\n                </div>\n                \n                <div class="col-md-4">\n                    <div class="card">\n                        <div class="card-header bg-success text-white">\n                            <h5 class="card-title mb-0">Đặt đồ ăn & thức uống</h5>\n                        </div>\n                        <div class="card-body">\n                            <div class="quick-order-items">\n                                ${foodService.getAvailableItems().map((n=>`\n                                    <div class="form-check mb-2">\n                                        <input class="form-check-input" type="checkbox" value="${n.id}" id="food${n.id}">\n                                        <label class="form-check-label d-flex justify-content-between" for="food${n.id}">\n                                            <span>${n.name}</span>\n                                            <span>${new Intl.NumberFormat("vi-VN").format(n.price)}đ</span>\n                                        </label>\n                                    </div>\n                                `)).join("")}\n                            </div>\n                            <button class="btn btn-success mt-3" id="orderFoodBtn">Đặt ngay</button>\n                        </div>\n                    </div>\n                </div>\n            </div>\n\n            <div class="row">\n                <div class="col-md-6">\n                    <div class="card mb-4">\n                        <div class="card-header bg-info text-white">\n                            <h5 class="card-title mb-0">Khuyến mãi hot</h5>\n                        </div>\n                        <div class="card-body">\n                            ${promotionService.getActivePromotions().map((n=>`\n                                <div class="promo-item mb-2 d-flex justify-content-between align-items-center">\n                                    <span>${n.name}</span>\n                                    <button class="btn btn-sm btn-outline-info" data-promo-id="${n.id}">Xem chi tiết</button>\n                                </div>\n                            `)).join("")}\n                        </div>\n                    </div>\n                </div>\n                <div class="col-md-6">\n                    <div class="card mb-4">\n                        <div class="card-header bg-warning">\n                            <h5 class="card-title mb-0">Thông tin rạp</h5>\n                        </div>\n                        <div class="card-body">\n                            <div class="info-item mb-2">\n                                <strong>Giờ mở cửa:</strong> 9:00 - 23:00\n                            </div>\n                            <div class="info-item mb-2">\n                                <strong>Hotline:</strong> 1900 xxxx\n                            </div>\n                            <div class="info-item">\n                                <strong>Địa chỉ:</strong> 123 Âu Cơ\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>`}export function renderTickets(){return'\n        <h2 class="mb-4">Quản lý bán vé</h2>\n        <div class="row">\n            <div class="col-md-4">\n                <div class="card">\n                    <div class="card-body">\n                        <h5 class="card-title">Bán vé</h5>\n                        <p class="card-text">Thực hiện giao dịch bán vé mới</p>\n                        <button class="btn btn-primary">Bán vé mới</button>\n                    </div>\n                </div>\n            </div>\n            <div class="col-md-4">\n                <div class="card">\n                    <div class="card-body">\n                        <h5 class="card-title">Kiểm tra vé</h5>\n                        <p class="card-text">Xem thông tin vé đã bán</p>\n                        <button class="btn btn-secondary">Kiểm tra</button>\n                    </div>\n                </div>\n            </div>\n        </div>'}export function renderInventory(){return'\n        <h2 class="mb-4">Quản lý kho</h2>\n        <div class="row">\n            <div class="col-md-6">\n                <div class="card mb-3">\n                    <div class="card-body">\n                        <h5 class="card-title">Tồn kho</h5>\n                        <p class="card-text">Kiểm tra hàng tồn kho</p>\n                        <button class="btn btn-info">Xem chi tiết</button>\n                    </div>\n                </div>\n            </div>\n            <div class="col-md-6">\n                <div class="card mb-3">\n                    <div class="card-body">\n                        <h5 class="card-title">Nhập kho</h5>\n                        <p class="card-text">Thêm hàng hóa mới vào kho</p>\n                        <button class="btn btn-success">Nhập hàng</button>\n                    </div>\n                </div>\n            </div>\n        </div>'}export function renderFinance(){return'\n        <h2 class="mb-4">Quản lý thu chi</h2>\n        <div class="row">\n            <div class="col-md-12 mb-4">\n                <div class="card">\n                    <div class="card-body">\n                        <h5 class="card-title">Tổng quan thu chi</h5>\n                        <canvas id="revenueChart"></canvas>\n                    </div>\n                </div>\n            </div>\n        </div>'}export function renderTicketCheck(){return'\n        <div class="container">\n            <h2 class="mb-4">Kiểm tra vé</h2>\n            \n            <div class="row">\n                <div class="col-md-6 mx-auto">\n                    <div class="card">\n                        <div class="card-body">\n                            <div class="mb-4">\n                                <label class="form-label">Nhập mã vé</label>\n                                <div class="input-group">\n                                    <input type="text" class="form-control" placeholder="VD: VE001...">\n                                    <button class="btn btn-primary" type="button">Kiểm tra</button>\n                                </div>\n                            </div>\n\n                            <div id="ticketInfo" class="d-none">\n                                <h5 class="card-title">Thông tin vé</h5>\n                                <table class="table">\n                                    <tr>\n                                        <td><strong>Mã vé:</strong></td>\n                                        <td>VE001</td>\n                                    </tr>\n                                    <tr>\n                                        <td><strong>Phim:</strong></td>\n                                        <td>Avengers: Endgame</td>\n                                    </tr>\n                                    <tr>\n                                        <td><strong>Suất chiếu:</strong></td>\n                                        <td>20:00 28/02/2024</td>\n                                    </tr>\n                                    <tr>\n                                        <td><strong>Phòng:</strong></td>\n                                        <td>P001</td>\n                                    </tr>\n                                    <tr>\n                                        <td><strong>Ghế:</strong></td>\n                                        <td>A1</td>\n                                    </tr>\n                                    <tr>\n                                        <td><strong>Trạng thái:</strong></td>\n                                        <td><span class="badge bg-success">Hợp lệ</span></td>\n                                    </tr>\n                                </table>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>'}export function renderInvoices(){return'\n        <h2 class="mb-4">Quản lý hóa đơn</h2>\n        <div class="row">\n            <div class="col-md-6">\n                <div class="card mb-3">\n                    <div class="card-body">\n                        <h5 class="card-title">Hóa đơn bán hàng</h5>\n                        <p class="card-text">Xem danh sách hóa đơn bán hàng</p>\n                        <button class="btn btn-info">Xem chi tiết</button>\n                    </div>\n                </div>\n            </div>\n            <div class="col-md-6">\n                <div class="card mb-3">\n                    <div class="card-body">\n                        <h5 class="card-title">Hóa đơn nhập hàng</h5>\n                        <p class="card-text">Xem danh sách hóa đơn nhập hàng</p>\n                        <button class="btn btn-success">Xem chi tiết</button>\n                    </div>\n                </div>\n            </div>\n        </div>'}export function renderTheaters(){return`\n        <div class="container">\n            <h2 class="mb-4">Quản lý phòng chiếu</h2>\n            \n            <div class="row mb-4">\n                <div class="col-md-6">\n                    <div class="input-group">\n                        <input type="text" class="form-control" placeholder="Nhập mã phòng...">\n                        <button class="btn btn-outline-secondary" type="button">Tìm kiếm</button>\n                    </div>\n                </div>\n                <div class="col-md-6 text-end">\n                    <button class="btn btn-success" data-bs-toggle="modal" data-bs-target="#addTheaterModal">\n                        <i class="fas fa-plus"></i> Thêm phòng chiếu mới\n                    </button>\n                </div>\n            </div>\n\n            <div class="row">\n                <div class="col-12">\n                    <div class="card">\n                        <div class="card-body">\n                            <div class="table-responsive">\n                                <table class="table table-hover">\n                                    <thead>\n                                        <tr>\n                                            <th>Mã phòng</th>\n                                            <th>Số chỗ ngồi</th>\n                                            <th>Loại máy chiếu</th>\n                                            <th>Hệ thống âm thanh</th>\n                                            <th>Diện tích (m²)</th>\n                                            <th>Tình trạng</th>\n                                            <th>Thao tác</th>\n                                        </tr>\n                                    </thead>\n                                    <tbody>\n                                        ${theaterService.getAllTheaters().map((n=>`\n                                            <tr>\n                                                <td>${n.id}</td>\n                                                <td>${n.seats}</td>\n                                                <td>${n.projectorType}</td>\n                                                <td>${n.soundSystem}</td>\n                                                <td>${n.area}</td>\n                                                <td>\n                                                    <span class="badge ${"active"===n.status?"bg-success":"bg-warning"}">\n                                                        ${"active"===n.status?"Hoạt động":"Bảo trì"}\n                                                    </span>\n                                                </td>\n                                                <td>\n                                                    <button class="btn btn-sm btn-info" data-theater-id="${n.id}">Chi tiết</button>\n                                                    <button class="btn btn-sm btn-warning" data-theater-id="${n.id}">Sửa</button>\n                                                    <button class="btn btn-sm btn-danger" data-theater-id="${n.id}">Xóa</button>\n                                                </td>\n                                            </tr>\n                                        `)).join("")}\n                                    </tbody>\n                                </table>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n\n            <div class="modal fade" id="addTheaterModal" tabindex="-1">\n                <div class="modal-dialog">\n                    <div class="modal-content">\n                        <div class="modal-header">\n                            <h5 class="modal-title">Thêm phòng chiếu mới</h5>\n                            <button type="button" class="btn-close" data-bs-dismiss="modal"></button>\n                        </div>\n                        <div class="modal-body">\n                            <form>\n                                <div class="mb-3">\n                                    <label class="form-label">Mã phòng</label>\n                                    <input type="text" class="form-control" placeholder="Nhập mã phòng">\n                                </div>\n                                <div class="mb-3">\n                                    <label class="form-label">Số chỗ ngồi</label>\n                                    <input type="number" class="form-control" placeholder="Nhập số chỗ ngồi">\n                                </div>\n                                <div class="mb-3">\n                                    <label class="form-label">Loại máy chiếu</label>\n                                    <select class="form-select">\n                                        <option>Digital 2K</option>\n                                        <option>Laser 4K</option>\n                                        <option>IMAX</option>\n                                    </select>\n                                </div>\n                                <div class="mb-3">\n                                    <label class="form-label">Hệ thống âm thanh</label>\n                                    <select class="form-select">\n                                        <option>Dolby 5.1</option>\n                                        <option>Dolby 7.1</option>\n                                        <option>Dolby Atmos</option>\n                                    </select>\n                                </div>\n                                <div class="mb-3">\n                                    <label class="form-label">Diện tích (m²)</label>\n                                    <input type="number" class="form-control" placeholder="Nhập diện tích">\n                                </div>\n                                <div class="mb-3">\n                                    <label class="form-label">Tình trạng</label>\n                                    <select class="form-select">\n                                        <option value="active">Hoạt động</option>\n                                        <option value="maintenance">Bảo trì</option>\n                                        <option value="inactive">Ngừng hoạt động</option>\n                                    </select>\n                                </div>\n                            </form>\n                        </div>\n                        <div class="modal-footer">\n                            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Đóng</button>\n                            <button type="button" class="btn btn-primary">Lưu</button>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>`}export function renderCustomers(){return`\n        <div class="container">\n            <h2 class="mb-4">Quản lý khách hàng</h2>\n            <div class="row mb-4">\n                <div class="col-md-6">\n                    <div class="input-group">\n                        <input type="text" class="form-control" id="searchPhone" placeholder="Nhập số điện thoại...">\n                        <button class="btn btn-outline-secondary" type="button">Tìm kiếm</button>\n                    </div>\n                </div>\n                <div class="col-md-6 text-end">\n                    <button class="btn btn-success" data-bs-toggle="modal" data-bs-target="#addCustomerModal">\n                        <i class="fas fa-plus"></i> Thêm khách hàng mới\n                    </button>\n                </div>\n            </div>\n           <div class="row">\n                <div class="col-12">\n                    <div class="card">\n                        <div class="card-body">\n                            <div class="table-responsive">\n                                <table class="table table-hover">\n                                    <thead>\n                                        <tr>\n                                            <th>Mã KH</th>\n                                            <th>Tên KH</th>\n                                            <th>Số điện thoại</th>\n                                            <th>Email</th>\n                                            <th>Địa chỉ</th>\n                                            <th>Thao tác</th>\n                                        </tr>\n                                    </thead>\n                                    <tbody id="customerTableBody">\n                                        ${customerService.getAllCustomers().map((n=>`\n                                            <tr>\n                                                <td>${n.id}</td>\n                                                <td>${n.name}</td>\n                                                <td>${n.phone}</td>\n                                                <td>${n.email}</td>\n                                                <td>${n.address}</td>\n                                                <td>\n                                                    <button class="btn btn-sm btn-warning" onclick="">Sửa</button>\n                                                    <button class="btn btn-sm btn-danger" onclick="">Xóa</button>\n                                                </td>\n                                            </tr>\n                                        `)).join("")}\n                                    </tbody>\n                                </table>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n\n        <div class="modal fade" id="addCustomerModal" tabindex="-1">\n            <div class="modal-dialog">\n                <div class="modal-content">\n                    <div class="modal-header">\n                        <h5 class="modal-title">Thêm khách hàng mới</h5>\n                        <button type="button" class="btn-close" data-bs-dismiss="modal"></button>\n                    </div>\n                    <div class="modal-body">\n                        <form id="addCustomerForm">\n                            <div class="mb-3">\n                                <label class="form-label">Tên khách hàng</label>\n                                <input type="text" class="form-control" id="customerName" required>\n                            </div>\n                            <div class="mb-3">\n                                <label class="form-label">Số điện thoại</label>\n                                <input type="text" class="form-control" id="customerPhone" required>\n                            </div>\n                            <div class="mb-3">\n                                <label class="form-label">Email</label>\n                                <input type="email" class="form-control" id="customerEmail">\n                            </div>\n                            <div class="mb-3">\n                                <label class="form-label">Địa chỉ</label>\n                                <input type="text" class="form-control" id="customerAddress">\n                            </div>\n                        </form>\n                    </div>\n                    <div class="modal-footer">\n                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Đóng</button>\n                        <button type="button" class="btn btn-primary" id="saveCustomerBtn">Lưu</button>\n                    </div>\n                </div>\n            </div>\n        </div>\n\n        <div class="modal fade" id="editCustomerModal" tabindex="-1">\n            <div class="modal-dialog">\n                <div class="modal-content">\n                    <div class="modal-header">\n                        <h5 class="modal-title">Sửa thông tin khách hàng</h5>\n                        <button type="button" class="btn-close" data-bs-dismiss="modal"></button>\n                    </div>\n                    <div class="modal-body">\n                        <form id="editCustomerForm">\n                            <input type="hidden" id="editCustomerId">\n                            <div class="mb-3">\n                                <label class="form-label">Tên khách hàng</label>\n                                <input type="text" class="form-control" id="editCustomerName" required>\n                            </div>\n                            <div class="mb-3">\n                                <label class="form-label">Số điện thoại</label>\n                                <input type="text" class="form-control" id="editCustomerPhone" required>\n                            </div>\n                            <div class="mb-3">\n                                <label class="form-label">Email</label>\n                                <input type="email" class="form-control" id="editCustomerEmail">\n                            </div>\n                            <div class="mb-3">\n                                <label class="form-label">Địa chỉ</label>\n                                <input type="text" class="form-control" id="editCustomerAddress">\n                            </div>\n                        </form>\n                    </div>\n                    <div class="modal-footer">\n                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Đóng</button>\n                        <button type="button" class="btn btn-primary" id="updateCustomerBtn">Cập nhật</button>\n                    </div>\n                </div>\n            </div>\n        </div>\n\n        <script>\n            document.getElementById('saveCustomerBtn').addEventListener('click', function() {\n            });\n\n            document.getElementById('updateCustomerBtn').addEventListener('click', function() {\n            });\n\n            document.getElementById('searchPhone').addEventListener('input', function() {\n            });\n\n            function editCustomer(id) {\n            }\n\n            function deleteCustomer(id) {\n            }\n        <\/script>`}export function renderEmployees(){return`\n        <div class="container">\n            <h2 class="mb-4">Quản lý nhân viên</h2>\n            <div class="row mb-4">\n                <div class="col-md-6">\n                    <div class="input-group">\n                        <input type="text" class="form-control" placeholder="Nhập mã nhân viên...">\n                        <button class="btn btn-outline-secondary" type="button">Tìm kiếm</button>\n                    </div>\n                </div>\n                <div class="col-md-6 text-end">\n                    <button class="btn btn-success" data-bs-toggle="modal" data-bs-target="#addEmployeeModal">\n                        <i class="fas fa-plus"></i> Thêm nhân viên mới\n                    </button>\n                </div>\n            </div>\n            <div class="card mb-4">\n                <div class="card-body">\n                    <div class="table-responsive">\n                        <table class="table">\n                            <thead>\n                                <tr>\n                                    <th>MANV</th>\n                                    <th>TENNV</th>\n                                    <th>CHUCVU</th>\n                                    <th>NOISINH</th>\n                                    <th>NGAYSINH</th>\n                                    <th>DIACHI</th>\n                                    <th>SDT</th>\n                                    <th>Thao tác</th>\n                                </tr>\n                            </thead>\n                            <tbody>\n                                ${employeeService.getAllEmployees().map((n=>`\n                                    <tr>\n                                        <td>${n.id}</td>\n                                        <td>${n.name}</td>\n                                        <td>${n.position}</td>\n                                        <td>${n.birthPlace}</td>\n                                        <td>${n.birthDate}</td>\n                                        <td>${n.address.split(",")[0]}</td>\n                                        <td>${n.phone}</td>\n                                        <td>\n                                            <button class="btn btn-sm btn-primary" onclick="">Sửa</button>\n                                            <button class="btn btn-sm btn-danger" onclick="">Xóa</button>\n                                        </td>\n                                    </tr>\n                                `)).join("")}\n                            </tbody>\n                        </table>\n                    </div>\n                </div>\n            </div>\n        </div>`}export function renderMovies(){return`\n        <div class="container">\n            <h2 class="mb-4">Quản lý phim</h2>\n            <div class="row">\n                ${movieService.getAllMovies().map((n=>`\n                    <div class="col-md-4 mb-4">\n                        <div class="card">\n                            <img src="${n.poster}" class="card-img-top" alt="${n.title} poster">\n                            <div class="card-body">\n                                <h5 class="card-title">${n.title}</h5>\n                                <p class="card-text">\n                                    <strong>Thời lượng:</strong> ${n.duration} phút<br>\n                                    <strong>Đạo diễn:</strong> ${n.director}<br>\n                                    <strong>Thể loại:</strong> ${n.genre}<br>\n                                    <strong>Năm sản xuất:</strong> ${n.releaseYear}\n                                </p>\n                                <div class="d-flex justify-content-between">\n                                    <span class="badge ${"showing"===n.status?"bg-success":"bg-warning"} mb-2">\n                                        ${"showing"===n.status?"Đang chiếu":"Sắp chiếu"}\n                                    </span>\n                                    <span class="badge bg-info mb-2">${n.format}</span>\n                                </div>\n                                <div class="btn-group d-flex mt-2">\n                                    <button class="btn btn-primary" data-movie-id="${n.id}">Chi tiết</button>\n                                    <button class="btn btn-warning" data-movie-id="${n.id}">Sửa</button>\n                                    <button class="btn btn-danger" data-movie-id="${n.id}">Xóa</button>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                `)).join("")}\n                \n                <div class="col-md-4 mb-4">\n                    <div class="card h-100 d-flex justify-content-center align-items-center">\n                        <button class="btn btn-lg btn-success" data-bs-toggle="modal" data-bs-target="#addMovieModal">\n                            <i class="fas fa-plus"></i>\n                            Thêm phim mới\n                        </button>\n                    </div>\n                </div>\n            </div>\n            \n            <div class="modal fade" id="addMovieModal" tabindex="-1">\n                <div class="modal-dialog">\n                    <div class="modal-content">\n                        <div class="modal-header">\n                            <h5 class="modal-title">Thêm phim mới</h5>\n                            <button type="button" class="btn-close" data-bs-dismiss="modal"></button>\n                        </div>\n                        <div class="modal-body">\n                            <form id="addMovieForm">\n                                <div class="mb-3">\n                                    <label class="form-label">Tên phim</label>\n                                    <input type="text" class="form-control" id="movieTitle" required>\n                                </div>\n                                <div class="mb-3">\n                                    <label class="form-label">Năm sản xuất</label>\n                                    <input type="number" class="form-control" id="movieYear" required>\n                                </div>\n                                <div class="mb-3">\n                                    <label class="form-label">Thời lượng (phút)</label>\n                                    <input type="number" class="form-control" id="movieDuration" required>\n                                </div>\n                                <div class="mb-3">\n                                    <label class="form-label">Đạo diễn</label>\n                                    <input type="text" class="form-control" id="movieDirector">\n                                </div>\n                                <div class="mb-3">\n                                    <label class="form-label">Thể loại</label>\n                                    <input type="text" class="form-control" id="movieGenre">\n                                </div>\n                                <div class="mb-3">\n                                    <label class="form-label">Định dạng</label>\n                                    <select class="form-select" id="movieFormat">\n                                        <option value="2D">2D</option>\n                                        <option value="3D">3D</option>\n                                        <option value="IMAX">IMAX</option>\n                                    </select>\n                                </div>\n                                <div class="mb-3">\n                                    <label class="form-label">Mô tả</label>\n                                    <textarea class="form-control" id="movieDescription" rows="3"></textarea>\n                                </div>\n                                <div class="mb-3">\n                                    <label class="form-label">Poster URL</label>\n                                    <input type="url" class="form-control" id="moviePoster">\n                                </div>\n                                <div class="mb-3">\n                                    <label class="form-label">Trạng thái</label>\n                                    <select class="form-select" id="movieStatus">\n                                        <option value="showing">Đang chiếu</option>\n                                        <option value="coming_soon">Sắp chiếu</option>\n                                    </select>\n                                </div>\n                            </form>\n                        </div>\n                        <div class="modal-footer">\n                            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Đóng</button>\n                            <button type="button" class="btn btn-primary" id="saveMovieBtn">Lưu</button>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>`}export function renderSuppliers(){const n=supplierService.getAllSuppliers(),t=supplierService.getActiveSuppliers(),a=n.filter((n=>"active"!==n.status));return`\n        <div class="container">\n            <h2 class="mb-4">Quản lý nhà cung cấp</h2>\n            \n            <div class="row mb-4">\n                <div class="col-md-6">\n                    <div class="input-group">\n                        <input type="text" class="form-control" id="supplierSearch" placeholder="Tìm kiếm nhà cung cấp...">\n                        <button class="btn btn-outline-secondary" type="button">Tìm kiếm</button>\n                    </div>\n                </div>\n                <div class="col-md-6 text-end">\n                    <button class="btn btn-success" data-bs-toggle="modal" data-bs-target="#addSupplierModal">\n                        <i class="fas fa-plus"></i> Thêm nhà cung cấp mới\n                    </button>\n                </div>\n            </div>\n\n            <div class="card mb-4">\n                <div class="card-body">\n                    <div class="table-responsive">\n                        <table class="table table-hover">\n                            <thead>\n                                <tr>\n                                    <th>Mã NCC</th>\n                                    <th>Tên nhà cung cấp</th>\n                                    <th>Số điện thoại</th>\n                                    <th>Email</th>\n                                    <th>Địa chỉ</th>\n                                    <th>Loại hàng</th>\n                                    <th>Trạng thái</th>\n                                    <th>Thao tác</th>\n                                </tr>\n                            </thead>\n                            <tbody>\n                                ${n.map((n=>`\n                                    <tr>\n                                        <td>${n.id}</td>\n                                        <td>${n.name}</td>\n                                        <td>${n.phone}</td>\n                                        <td>${n.email}</td>\n                                        <td>${n.address}</td>\n                                        <td>${getCategoryDisplay(n.category)}</td>\n                                        <td>\n                                            <span class="badge ${"active"===n.status?"bg-success":"bg-warning"}">\n                                                ${"active"===n.status?"Đang hợp tác":"Tạm ngưng"}\n                                            </span>\n                                        </td>\n                                        <td>\n                                            <button class="btn btn-sm btn-info view-supplier" data-supplier-id="${n.id}" data-bs-toggle="modal" data-bs-target="#viewSupplierModal">Chi tiết</button>\n                                            <button class="btn btn-sm btn-warning edit-supplier" data-supplier-id="${n.id}">Sửa</button>\n                                            <button class="btn btn-sm btn-danger delete-supplier" data-supplier-id="${n.id}">Xóa</button>\n                                        </td>\n                                    </tr>\n                                `)).join("")}\n                            </tbody>\n                        </table>\n                    </div>\n                </div>\n            </div>\n\n            <div class="row">\n                <div class="col-md-4">\n                    <div class="card bg-light">\n                        <div class="card-body">\n                            <h5 class="card-title">Tổng số nhà cung cấp</h5>\n                            <p class="display-4">${n.length}</p>\n                        </div>\n                    </div>\n                </div>\n                <div class="col-md-4">\n                    <div class="card bg-light">\n                        <div class="card-body">\n                            <h5 class="card-title">Đang hợp tác</h5>\n                            <p class="display-4">${t.length}</p>\n                        </div>\n                    </div>\n                </div>\n                <div class="col-md-4">\n                    <div class="card bg-light">\n                        <div class="card-body">\n                            <h5 class="card-title">Tạm ngưng</h5>\n                            <p class="display-4">${a.length}</p>\n                        </div>\n                    </div>\n                </div>\n            </div>\n\n            <div class="modal fade" id="viewSupplierModal" tabindex="-1">\n                <div class="modal-dialog modal-lg">\n                    <div class="modal-content">\n                        <div class="modal-header">\n                            <h5 class="modal-title">Chi tiết nhà cung cấp</h5>\n                            <button type="button" class="btn-close" data-bs-dismiss="modal"></button>\n                        </div>\n                        <div class="modal-body" id="supplierDetailContent">\n                        </div>\n                        <div class="modal-footer">\n                            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Đóng</button>\n                            <button type="button" class="btn btn-primary">In thông tin</button>\n                        </div>\n                    </div>\n                </div>\n            </div>\n\n            <div class="modal fade" id="addSupplierModal" tabindex="-1">\n                <div class="modal-dialog">\n                    <div class="modal-content">\n                        <div class="modal-header">\n                            <h5 class="modal-title">Thêm nhà cung cấp mới</h5>\n                            <button type="button" class="btn-close" data-bs-dismiss="modal"></button>\n                        </div>\n                        <div class="modal-body">\n                            <form id="addSupplierForm">\n                                <div class="mb-3">\n                                    <label class="form-label">Mã nhà cung cấp</label>\n                                    <input type="text" class="form-control" id="supplierId" placeholder="Nhập mã nhà cung cấp">\n                                </div>\n                                <div class="mb-3">\n                                    <label class="form-label">Tên công ty</label>\n                                    <input type="text" class="form-control" id="supplierName" placeholder="Nhập tên công ty">\n                                </div>\n                                <div class="mb-3">\n                                    <label class="form-label">Người liên hệ</label>\n                                    <input type="text" class="form-control" id="contactPerson" placeholder="Nhập tên người liên hệ">\n                                </div>\n                                <div class="mb-3">\n                                    <label class="form-label">Chức vụ</label>\n                                    <input type="text" class="form-control" id="position" placeholder="Nhập chức vụ">\n                                </div>\n                                <div class="mb-3">\n                                    <label class="form-label">Số điện thoại</label>\n                                    <input type="text" class="form-control" id="phone" placeholder="Nhập số điện thoại">\n                                </div>\n                                <div class="mb-3">\n                                    <label class="form-label">Email</label>\n                                    <input type="email" class="form-control" id="email" placeholder="Nhập email">\n                                </div>\n                                <div class="mb-3">\n                                    <label class="form-label">Địa chỉ</label>\n                                    <textarea class="form-control" id="address" rows="2" placeholder="Nhập địa chỉ"></textarea>\n                                </div>\n                                <div class="mb-3">\n                                    <label class="form-label">Loại hàng cung cấp</label>\n                                    <select class="form-select" id="category">\n                                        <option value="">Chọn loại hàng...</option>\n                                        <option value="food">Thực phẩm</option>\n                                        <option value="equipment">Thiết bị điện tử</option>\n                                        <option value="stationery">Văn phòng phẩm</option>\n                                        <option value="other">Khác</option>\n                                    </select>\n                                </div>\n                                <div class="mb-3">\n                                    <label class="form-label">Trạng thái</label>\n                                    <select class="form-select" id="status">\n                                        <option value="active">Đang hợp tác</option>\n                                        <option value="inactive">Tạm ngưng</option>\n                                        <option value="stopped">Ngừng hợp tác</option>\n                                    </select>\n                                </div>\n                            </form>\n                        </div>\n                        <div class="modal-footer">\n                            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Đóng</button>\n                            <button type="button" class="btn btn-primary" id="saveSupplierBtn">Lưu</button>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>`}export function renderShowtimes(){const n=showtimeService.getAllShowtimes(),t=new Date;return`\n        <div class="container">\n            <h2 class="mb-4">Quản lý suất chiếu</h2>\n            \n            <div class="row mb-4">\n                <div class="col-md-6">\n                    <div class="input-group">\n                        <input type="date" class="form-control" id="showtimeDate">\n                        <button class="btn btn-outline-secondary" type="button" id="filterShowtimesBtn">Lọc</button>\n                    </div>\n                </div>\n                <div class="col-md-6 text-end">\n                    <button class="btn btn-success" data-bs-toggle="modal" data-bs-target="#addShowtimeModal">\n                        <i class="fas fa-plus"></i> Thêm suất chiếu mới\n                    </button>\n                </div>\n            </div>\n            \n            <div class="card mb-4">\n                <div class="card-body">\n                    <div class="table-responsive">\n                        <table class="table">\n                            <thead>\n                                <tr>\n                                    <th>Mã SC</th>\n                                    <th>Ngày chiếu</th>\n                                    <th>Giờ chiếu</th>\n                                    <th>Phim</th>\n                                    <th>Phòng</th>\n                                    <th>Định dạng</th>\n                                    <th>Ghế trống</th>\n                                    <th>Giá vé</th>\n                                    <th>Trạng thái</th>\n                                    <th>Thao tác</th>\n                                </tr>\n                            </thead>\n                            <tbody>\n                                ${n.map((n=>{const a=movieService.getMovieById(n.movieId),s=theaterService.getTheaterById(n.theater),e=new Date(n.date+"T"+n.time);let i,d;return e<t?(i="Đã chiếu",d="bg-secondary"):e.getDate()===t.getDate()&&Math.abs(e-t)<72e5?(i="Đang chiếu",d="bg-success"):(i="Sắp chiếu",d="bg-warning"),`\n                                        <tr>\n                                            <td>${n.id}</td>\n                                            <td>${new Date(n.date).toLocaleDateString("vi-VN")}</td>\n                                            <td>${n.time}</td>\n                                            <td>${a?a.title:n.movieId}</td>\n                                            <td>${s?s.name:n.theater}</td>\n                                            <td>${n.format}</td>\n                                            <td>${n.availableSeats}/${n.totalSeats}</td>\n                                            <td>${new Intl.NumberFormat("vi-VN").format(n.price)}đ</td>\n                                            <td><span class="badge ${d}">${i}</span></td>\n                                            <td>\n                                                <button class="btn btn-sm btn-info" data-showtime-id="${n.id}">Chi tiết</button>\n                                                <button class="btn btn-sm btn-primary" data-showtime-id="${n.id}">Sửa</button>\n                                                <button class="btn btn-sm btn-danger" data-showtime-id="${n.id}">Hủy</button>\n                                            </td>\n                                        </tr>\n                                    `})).join("")}\n                            </tbody>\n                        </table>\n                    </div>\n                </div>\n            </div>\n            \n            <div class="modal fade" id="addShowtimeModal" tabindex="-1">\n                <div class="modal-dialog">\n                    <div class="modal-content">\n                        <div class="modal-header">\n                            <h5 class="modal-title">Thêm suất chiếu mới</h5>\n                            <button type="button" class="btn-close" data-bs-dismiss="modal"></button>\n                        </div>\n                        <div class="modal-body">\n                            <form id="addShowtimeForm">\n                                <div class="mb-3">\n                                    <label class="form-label">Phim</label>\n                                    <select class="form-select" id="movieId" required>\n                                        <option value="">Chọn phim...</option>\n                                        ${movieService.getAllMovies().map((n=>`<option value="${n.id}">${n.title} (${n.format})</option>`)).join("")}\n                                    </select>\n                                </div>\n                                <div class="mb-3">\n                                    <label class="form-label">Ngày chiếu</label>\n                                    <input type="date" class="form-control" id="showDate" required>\n                                </div>\n                                <div class="mb-3">\n                                    <label class="form-label">Giờ chiếu</label>\n                                    <input type="time" class="form-control" id="showTime" required>\n                                </div>\n                                <div class="mb-3">\n                                    <label class="form-label">Phòng chiếu</label>\n                                    <select class="form-select" id="theaterId" required>\n                                        <option value="">Chọn phòng...</option>\n                                        ${theaterService.getActiveTheaters().map((n=>`<option value="${n.id}">${n.name} (${n.seats} ghế)</option>`)).join("")}\n                                    </select>\n                                </div>\n                                <div class="mb-3">\n                                    <label class="form-label">Định dạng</label>\n                                    <select class="form-select" id="format" required>\n                                        <option value="2D - Phụ đề">2D - Phụ đề</option>\n                                        <option value="3D - Phụ đề">3D - Phụ đề</option>\n                                        <option value="2D - Lồng tiếng">2D - Lồng tiếng</option>\n                                        <option value="IMAX - Phụ đề">IMAX - Phụ đề</option>\n                                    </select>\n                                </div>\n                                <div class="mb-3">\n                                    <label class="form-label">Giá vé</label>\n                                    <input type="number" class="form-control" id="ticketPrice" required>\n                                </div>\n                            </form>\n                        </div>\n                        <div class="modal-footer">\n                            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Đóng</button>\n                            <button type="button" class="btn btn-primary" id="saveShowtimeBtn">Lưu</button>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>`}export function renderServices(){return`\n        <div class="container">\n            <h2 class="mb-4">Quản lý dịch vụ kèm</h2>\n            \n            <div class="row mb-4">\n                <div class="col-md-6">\n                    <div class="input-group">\n                        <input type="text" class="form-control" placeholder="Tìm kiếm dịch vụ...">\n                        <button class="btn btn-outline-secondary" type="button">Tìm kiếm</button>\n                    </div>\n                </div>\n                <div class="col-md-6 text-end">\n                    <button class="btn btn-success" data-bs-toggle="modal" data-bs-target="#addServiceModal">\n                        <i class="fas fa-plus"></i> Thêm dịch vụ mới\n                    </button>\n                </div>\n            </div>\n\n            <div class="row">\n                <div class="col-12">\n                    <div class="card">\n                        <div class="card-body">\n                            <div class="table-responsive">\n                                <table class="table">\n                                    <thead>\n                                        <tr>\n                                            <th>Mã DV</th>\n                                            <th>Tên dịch vụ</th>\n                                            <th>Mô tả</th>\n                                            <th>Giá</th>\n                                            <th>Trạng thái</th>\n                                            <th>Thao tác</th>\n                                        </tr>\n                                    </thead>\n                                    <tbody>\n                                        ${foodService.getAllItems().map((n=>`\n                                            <tr>\n                                                <td>${n.id}</td>\n                                                <td>${n.name}</td>\n                                                <td>${n.description||""}</td>\n                                                <td>${new Intl.NumberFormat("vi-VN").format(n.price)}đ</td>\n                                                <td>\n                                                    <span class="badge ${"available"===n.status?"bg-success":"bg-warning"}">\n                                                        ${"available"===n.status?"Còn hàng":"Hết hàng"}\n                                                    </span>\n                                                </td>\n                                                <td>\n                                                    <button class="btn btn-sm btn-warning" data-item-id="${n.id}">Sửa</button>\n                                                    <button class="btn btn-sm btn-danger" data-item-id="${n.id}">Xóa</button>\n                                                </td>\n                                            </tr>\n                                        `)).join("")}\n                                    </tbody>\n                                </table>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n\n            <div class="modal fade" id="addServiceModal" tabindex="-1">\n                <div class="modal-dialog">\n                    <div class="modal-content">\n                        <div class="modal-header">\n                            <h5 class="modal-title">Thêm dịch vụ mới</h5>\n                            <button type="button" class="btn-close" data-bs-dismiss="modal"></button>\n                        </div>\n                        <div class="modal-body">\n                            <form>\n                                <div class="mb-3">\n                                    <label class="form-label">Mã dịch vụ</label>\n                                    <input type="text" class="form-control" placeholder="Nhập mã dịch vụ">\n                                </div>\n                                <div class="mb-3">\n                                    <label class="form-label">Tên dịch vụ</label>\n                                    <input type="text" class="form-control" placeholder="Nhập tên dịch vụ">\n                                </div>\n                                <div class="mb-3">\n                                    <label class="form-label">Mô tả</label>\n                                    <textarea class="form-control" rows="3" placeholder="Nhập mô tả dịch vụ"></textarea>\n                                </div>\n                                <div class="mb-3">\n                                    <label class="form-label">Giá</label>\n                                    <input type="number" class="form-control" placeholder="Nhập giá dịch vụ">\n                                </div>\n                                <div class="mb-3">\n                                    <label class="form-label">Trạng thái</label>\n                                    <select class="form-select">\n                                        <option value="available">Còn hàng</option>\n                                        <option value="unavailable">Hết hàng</option>\n                                    </select>\n                                </div>\n                            </form>\n                        </div>\n                        <div class="modal-footer">\n                            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Đóng</button>\n                            <button type="button" class="btn btn-primary">Lưu</button>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>`}export function renderTicketSale(){const n=movieService.getShowingMovies(),t=[];for(let n=0;n<7;n++){const a=new Date;a.setDate(a.getDate()+n),t.push({value:a.toISOString().split("T")[0],label:0===n?"Hôm nay":1===n?"Ngày mai":new Intl.DateTimeFormat("vi-VN",{weekday:"long",day:"2-digit",month:"2-digit"}).format(a)})}return setTimeout((()=>{import("../js/ticketSale.js").then((n=>{n.initTicketSale()})).catch((n=>{console.error("Error loading ticket sale module:",n)}))}),100),`\n        <div class="container">\n            <h2 class="mb-4">Mua vé xem phim</h2>\n            \n            <div class="row">\n                <div class="col-md-8">\n                    <div class="card mb-4">\n                        <div class="card-header">\n                            <h5 class="card-title mb-0">Thông tin vé</h5>\n                        </div>\n                        <div class="card-body">\n                            <div class="row mb-3">\n                                <div class="col-md-6">\n                                    <label class="form-label">Chọn phim</label>\n                                    <select class="form-select" id="movieSelect">\n                                        <option value="">Chọn phim...</option>\n                                        ${n.map((n=>`<option value="${n.id}">${n.title} - ${n.format}</option>`)).join("")}\n                                    </select>\n                                </div>\n                                <div class="col-md-3">\n                                    <label class="form-label">Ngày chiếu</label>\n                                    <select class="form-select" id="dateSelect">\n                                        <option value="">Chọn ngày...</option>\n                                        ${t.map((n=>`<option value="${n.value}">${n.label}</option>`)).join("")}\n                                    </select>\n                                </div>\n                                <div class="col-md-3">\n                                    <label class="form-label">Giờ chiếu</label>\n                                    <select class="form-select" id="timeSelect">\n                                        <option value="">Chọn giờ...</option>\n                                    </select>\n                                </div>\n                            </div>\n                            \n                            <div class="row mb-3" id="ticketTypeSection">\n                                <div class="col-md-6">\n                                    <label class="form-label">Loại khách hàng</label>\n                                    <select class="form-select" id="customerType">\n                                        <option value="adult" data-price="90000">Người lớn - 90.000đ</option>\n                                        <option value="student" data-price="75000">Sinh viên - 75.000đ</option>\n                                        <option value="child" data-price="60000">Trẻ em - 60.000đ</option>\n                                    </select>\n                                </div>\n                                <div class="col-md-6">\n                                    <label class="form-label">Số lượng vé</label>\n                                    <input type="number" class="form-control" id="ticketQuantity" min="1" value="1">\n                                </div>\n                            </div>\n\n                            <div class="mb-3" id="seatMapSection" style="display: none;">\n                                <label class="form-label">Chọn ghế</label>\n                                <div class="text-center mb-3">\n                                    <div class="screen bg-dark text-white py-2 mb-4">Màn hình</div>\n                                </div>\n                                <div class="seat-map bg-light p-3 text-center">\n                                    <div class="seat-guide mb-3 d-flex justify-content-center gap-3">\n                                        <div><span class="seat-icon available"></span> Còn trống</div>\n                                        <div><span class="seat-icon selected"></span> Đã chọn</div>\n                                        <div><span class="seat-icon occupied"></span> Đã đặt</div>\n                                    </div>\n                                    <div id="seatContainer" class="d-flex flex-column align-items-center">\n                                    </div>\n                                </div>\n                                <div id="selectedSeats" class="mt-3 alert alert-info d-none">\n                                    <strong>Ghế đã chọn:</strong> <span id="seatList"></span>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n\n                    <div class="card mb-4">\n                        <div class="card-header">\n                            <h5 class="card-title mb-0">Dịch vụ kèm theo</h5>\n                        </div>\n                        <div class="card-body">\n                            <div class="row">\n                                ${foodService.getAvailableItems().map(((n,t)=>`\n                                    <div class="col-md-6 mb-3">\n                                        <div class="form-check">\n                                            <input class="form-check-input service-checkbox" type="checkbox" id="service${n.id}" data-price="${n.price}">\n                                            <label class="form-check-label d-flex justify-content-between" for="service${n.id}">\n                                                <span>${n.name}</span>\n                                                <span>${new Intl.NumberFormat("vi-VN").format(n.price)}đ</span>\n                                            </label>\n                                        </div>\n                                    </div>\n                                `)).join("")}\n                            </div>\n                        </div>\n                    </div>\n                </div>\n\n                <div class="col-md-4">\n                    <div class="card">\n                        <div class="card-header">\n                            <h5 class="card-title mb-0">Thanh toán</h5>\n                        </div>\n                        <div class="card-body">\n                            <div class="mb-3">\n                                <label class="form-label">Mã khuyến mãi</label>\n                                <div class="input-group">\n                                    <input type="text" class="form-control" placeholder="Nhập mã...">\n                                    <button class="btn btn-outline-secondary" type="button" id="applyPromoBtn">Áp dụng</button>\n                                </div>\n                            </div>\n\n                            <div class="summary">\n                                <div class="d-flex justify-content-between mb-2">\n                                    <span>Tiền vé:</span>\n                                    <span id="ticketPrice">0đ</span>\n                                </div>\n                                <div class="d-flex justify-content-between mb-2">\n                                    <span>Dịch vụ:</span>\n                                    <span id="servicePrice">0đ</span>\n                                </div>\n                                <div class="d-flex justify-content-between mb-2">\n                                    <span>Giảm giá:</span>\n                                    <span id="discountPrice">0đ</span>\n                                </div>\n                                <hr>\n                                <div class="d-flex justify-content-between fw-bold">\n                                    <span>Tổng cộng:</span>\n                                    <span id="totalPrice">0đ</span>\n                                </div>\n                            </div>\n\n                            <button class="btn btn-primary w-100 mt-3" id="paymentBtn">Thanh toán</button>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>`}export function renderTransactionList(){return`\n        <div class="container">\n            <h2 class="mb-4">Danh sách hóa đơn</h2>\n            \n            <div class="row mb-4">\n                <div class="col-md-6">\n                    <div class="input-group">\n                        <input type="text" class="form-control" placeholder="Tìm kiếm hóa đơn...">\n                        <button class="btn btn-outline-secondary" type="button">Tìm kiếm</button>\n                    </div>\n                </div>\n                <div class="col-md-6">\n                    <div class="btn-group float-end">\n                        <button class="btn btn-outline-primary" id="filterAllBtn">Tất cả</button>\n                        <button class="btn btn-outline-success" id="filterPaidBtn">Đã thanh toán</button>\n                        <button class="btn btn-outline-warning" id="filterPendingBtn">Chưa thanh toán</button>\n                    </div>\n                </div>\n            </div>\n\n            <div class="card">\n                <div class="card-body">\n                    <div class="table-responsive">\n                        <table class="table table-hover">\n                            <thead>\n                                <tr>\n                                    <th>Mã HĐ</th>\n                                    <th>Ngày tạo</th>\n                                    <th>Khách hàng</th>\n                                    <th>Tổng tiền</th>\n                                    <th>Trạng thái</th>\n                                    <th>Thao tác</th>\n                                </tr>\n                            </thead>\n                            <tbody>\n                                ${transactionService.getAllTransactions().map((n=>`\n                                    <tr>\n                                        <td>${n.id}</td>\n                                        <td>${n.date}</td>\n                                        <td>${n.customerName}</td>\n                                        <td>${new Intl.NumberFormat("vi-VN").format(n.finalAmount)}đ</td>\n                                        <td>\n                                            <span class="badge ${"paid"===n.status?"bg-success":"bg-warning"}">\n                                                ${"paid"===n.status?"Đã thanh toán":"Chưa thanh toán"}\n                                            </span>\n                                        </td>\n                                        <td>\n                                            <button class="btn btn-sm btn-info view-invoice" data-invoice-id="${n.id}" \n                                                data-bs-toggle="modal" data-bs-target="#invoiceDetailModal">Chi tiết</button>\n                                            ${"paid"===n.status?'<button class="btn btn-sm btn-secondary">In hóa đơn</button>':'<button class="btn btn-sm btn-primary">Thanh toán</button>'}\n                                        </td>\n                                    </tr>\n                                `)).join("")}\n                            </tbody>\n                        </table>\n                    </div>\n                </div>\n            </div>\n\n            <div class="modal fade" id="invoiceDetailModal" tabindex="-1">\n                <div class="modal-dialog modal-lg">\n                    <div class="modal-content">\n                        <div class="modal-header">\n                            <h5 class="modal-title">Chi tiết hóa đơn #HD001</h5>\n                            <button type="button" class="btn-close" data-bs-dismiss="modal"></button>\n                        </div>\n                        <div class="modal-body">\n                            <div class="row mb-3">\n                                <div class="col-md-6">\n                                    <p><strong>Khách hàng:</strong> Nguyễn Văn A</p>\n                                    <p><strong>Số điện thoại:</strong> 0123456789</p>\n                                </div>\n                                <div class="col-md-6 text-end">\n                                    <p><strong>Ngày tạo:</strong> 28/02/2024 15:30</p>\n                                    <p><strong>Trạng thái:</strong> <span class="badge bg-success">Đã thanh toán</span></p>\n                                </div>\n                            </div>\n                            <table class="table">\n                                <thead>\n                                    <tr>\n                                        <th>Sản phẩm</th>\n                                        <th>Số lượng</th>\n                                        <th>Đơn giá</th>\n                                        <th>Thành tiền</th>\n                                    </tr>\n                                </thead>\n                                <tbody>\n                                    <tr>\n                                        <td>Vé xem phim - Avengers</td>\n                                        <td>1</td>\n                                        <td>120.000đ</td>\n                                        <td>120.000đ</td>\n                                    </tr>\n                                    <tr>\n                                        <td>Combo bắp nước</td>\n                                        <td>1</td>\n                                        <td>79.000đ</td>\n                                        <td>79.000đ</td>\n                                    </tr>\n                                </tbody>\n                                <tfoot>\n                                    <tr>\n                                        <td colspan="3" class="text-end"><strong>Tổng tiền:</strong></td>\n                                        <td>199.000đ</td>\n                                    </tr>\n                                </tfoot>\n                            </table>\n                        </div>\n                        <div class="modal-footer">\n                            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Đóng</button>\n                            <button type="button" class="btn btn-primary">In hóa đơn</button>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>`}export function renderPromotionManage(){const n=promotionService.getAllPromotions(),t=n.filter((n=>"active"===n.status)),a=n.filter((n=>"expired"===n.status)),s=n=>{switch(n.discountType){case"percentage":return`${n.discountValue}%`;case"fixed":return`${new Intl.NumberFormat("vi-VN").format(n.discountValue)}đ`;case"special":return"buy2get1"===n.discountValue?"Mua 2 tặng 1":n.discountValue;case"free_shipping":return"Miễn phí giao hàng";default:return""}},e=n=>{const t=new Date(n);return new Intl.DateTimeFormat("vi-VN",{day:"2-digit",month:"2-digit",year:"numeric"}).format(t)};return`\n        <div class="container">\n            <h2 class="mb-4">Quản lý khuyến mãi</h2>\n            \n            <div class="row mb-4">\n                <div class="col-md-6">\n                    <div class="input-group">\n                        <input type="text" class="form-control" id="promotionSearch" placeholder="Tìm kiếm mã khuyến mãi...">\n                        <button class="btn btn-outline-secondary" type="button">Tìm kiếm</button>\n                    </div>\n                </div>\n                <div class="col-md-6 text-end">\n                    <button class="btn btn-success" data-bs-toggle="modal" data-bs-target="#addPromotionModal">\n                        <i class="fas fa-plus"></i> Thêm mã khuyến mãi\n                    </button>\n                </div>\n            </div>\n\n            <div class="row mb-4">\n                <div class="col-md-6">\n                    <div class="card">\n                        <div class="card-header bg-success text-white">\n                            <h5 class="card-title mb-0">Mã khuyến mãi đang hoạt động</h5>\n                        </div>\n                        <div class="card-body">\n                            <div class="table-responsive">\n                                <table class="table">\n                                    <thead>\n                                        <tr>\n                                            <th>Mã KM</th>\n                                            <th>Tên chương trình</th>\n                                            <th>Giảm giá</th>\n                                            <th>Hết hạn</th>\n                                            <th>Thao tác</th>\n                                        </tr>\n                                    </thead>\n                                    <tbody>\n                                        ${t.map((n=>`\n                                            <tr>\n                                                <td>${n.code}</td>\n                                                <td>${n.name}</td>\n                                                <td>${s(n)}</td>\n                                                <td>${e(n.endDate)}</td>\n                                                <td>\n                                                    <div class="d-flex flex-wrap gap-2">\n                                                        <button class="btn btn-sm btn-info view-promotion" data-promo-id="${n.id}" data-bs-toggle="modal" data-bs-target="#promotionDetailModal">Chi tiết</button>\n                                                        <button class="btn btn-sm btn-danger cancel-promotion" data-promo-id="${n.id}">Hủy</button>\n                                                    </div>\n                                                </td>\n                                            </tr>\n                                        `)).join("")}\n                                    </tbody>\n                                </table>\n                                ${0===t.length?'<div class="text-center py-3">Không có mã khuyến mãi đang hoạt động</div>':""}\n                            </div>\n                        </div>\n                    </div>\n                </div>\n                \n                <div class="col-md-6">\n                    <div class="card">\n                        <div class="card-header bg-secondary text-white">\n                            <h5 class="card-title mb-0">Mã khuyến mãi hết hạn</h5>\n                        </div>\n                        <div class="card-body">\n                            <div class="table-responsive">\n                                <table class="table">\n                                    <thead>\n                                        <tr>\n                                            <th>Mã KM</th>\n                                            <th>Tên chương trình</th>\n                                            <th>Giảm giá</th>\n                                            <th>Đã hết hạn</th>\n                                            <th>Thao tác</th>\n                                        </tr>\n                                    </thead>\n                                    <tbody>\n                                        ${a.map((n=>`\n                                            <tr>\n                                                <td>${n.code}</td>\n                                                <td>${n.name}</td>\n                                                <td>${s(n)}</td>\n                                                <td>${e(n.endDate)}</td>\n                                                <td>\n                                                    <button class="btn btn-sm btn-info view-promotion" data-promo-id="${n.id}" data-bs-toggle="modal" data-bs-target="#promotionDetailModal">Chi tiết</button>\n                                                </td>\n                                            </tr>\n                                        `)).join("")}\n                                    </tbody>\n                                </table>\n                                ${0===a.length?'<div class="text-center py-3">Không có mã khuyến mãi hết hạn</div>':""}\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n\n            <div class="modal fade" id="promotionDetailModal" tabindex="-1">\n                <div class="modal-dialog">\n                    <div class="modal-content">\n                        <div class="modal-header">\n                            <h5 class="modal-title">Chi tiết khuyến mãi</h5>\n                            <button type="button" class="btn-close" data-bs-dismiss="modal"></button>\n                        </div>\n                        <div class="modal-body">\n                            <table class="table">\n                                <tr>\n                                    <td><strong>Mã khuyến mãi:</strong></td>\n                                    <td>KM001</td>\n                                </tr>\n                                <tr>\n                                    <td><strong>Tên chương trình:</strong></td>\n                                    <td>Giảm 50% combo</td>\n                                </tr>\n                                <tr>\n                                    <td><strong>Mô tả:</strong></td>\n                                    <td>Giảm 50% cho tất cả combo bắp nước</td>\n                                </tr>\n                                <tr>\n                                    <td><strong>Điều kiện áp dụng:</strong></td>\n                                    <td>Áp dụng cho mọi đơn hàng</td>\n                                </tr>\n                                <tr>\n                                    <td><strong>Giảm giá:</strong></td>\n                                    <td>50%</td>\n                                </tr>\n                                <tr>\n                                    <td><strong>Ngày bắt đầu:</strong></td>\n                                    <td>01/02/2024</td>\n                                </tr>\n                                <tr>\n                                    <td><strong>Ngày hết hạn:</strong></td>\n                                    <td>31/03/2024</td>\n                                </tr>\n                                <tr>\n                                    <td><strong>Trạng thái:</strong></td>\n                                    <td><span class="badge bg-success">Đang hoạt động</span></td>\n                                </tr>\n                            </table>\n                        </div>\n                        <div class="modal-footer">\n                            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Đóng</button>\n                        </div>\n                    </div>\n                </div>\n            </div>\n\n            <div class="modal fade" id="addPromotionModal" tabindex="-1">\n                <div class="modal-dialog">\n                    <div class="modal-content">\n                        <div class="modal-header">\n                            <h5 class="modal-title">Thêm mã khuyến mãi mới</h5>\n                            <button type="button" class="btn-close" data-bs-dismiss="modal"></button>\n                        </div>\n                        <div class="modal-body">\n                            <form id="addPromotionForm">\n                                <div class="mb-3">\n                                    <label class="form-label">Mã khuyến mãi</label>\n                                    <input type="text" class="form-control" id="promoCode" placeholder="Nhập mã khuyến mãi">\n                                </div>\n                                <div class="mb-3">\n                                    <label class="form-label">Tên chương trình</label>\n                                    <input type="text" class="form-control" id="promoName" placeholder="Nhập tên chương trình">\n                                </div>\n                                <div class="mb-3">\n                                    <label class="form-label">Mô tả</label>\n                                    <textarea class="form-control" id="promoDescription" rows="3"></textarea>\n                                </div>\n                                <div class="mb-3">\n                                    <label class="form-label">Điều kiện áp dụng</label>\n                                    <textarea class="form-control" id="promoConditions" rows="2"></textarea>\n                                </div>\n                                <div class="mb-3">\n                                    <label class="form-label">Loại giảm giá</label>\n                                    <select class="form-select" id="discountType">\n                                        <option value="percentage">Giảm theo phần trăm</option>\n                                        <option value="fixed">Giảm số tiền cố định</option>\n                                        <option value="special">Khuyến mãi đặc biệt</option>\n                                        <option value="free_shipping">Miễn phí giao hàng</option>\n                                    </select>\n                                </div>\n                                <div class="mb-3">\n                                    <label class="form-label">Giá trị giảm</label>\n                                    <input type="number" class="form-control" id="discountValue">\n                                </div>\n                                <div class="mb-3">\n                                    <label class="form-label">Thời gian áp dụng</label>\n                                    <div class="row">\n                                        <div class="col">\n                                            <input type="date" class="form-control" id="startDate" placeholder="Ngày bắt đầu">\n                                        </div>\n                                        <div class="col">\n                                            <input type="date" class="form-control" id="endDate" placeholder="Ngày kết thúc">\n                                        </div>\n                                    </div>\n                                </div>\n                            </form>\n                        </div>\n                        <div class="modal-footer">\n                            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Đóng</button>\n                            <button type="button" class="btn btn-primary" id="savePromoBtn">Lưu</button>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>`}function generateCustomerStats(){const n=statisticsService.getCustomerTypeStats();return console.log(n),`\n        <div class="col-md-6">\n            <div class="card">\n                <div class="card-header">\n                    <h5 class="mb-0">Phân bố theo loại khách hàng</h5>\n                </div>\n                <div class="card-body">\n                    <canvas id="customerTypeChart" height="250"></canvas>\n                    <div class="mt-3">\n                        <div class="row">\n                            ${n.map((n=>`\n                                <div class="col-md-4 text-center">\n                                    <h6>${n.label}</h6>\n                                    <h4>${n.percentage}%</h4>\n                                    <p>${n.tickets} vé</p>\n                                </div>`)).join("")}\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>`}function generateTimeFilterButtons(){return'\n        <div class="btn-group">\n            <button class="btn btn-outline-secondary btn-sm">7 ngày</button>\n            <button class="btn btn-outline-secondary btn-sm active">30 ngày</button>\n            <button class="btn btn-outline-secondary btn-sm">90 ngày</button>\n        </div>'}function generateTable(n,t){return`\n        <table class="table table-hover">\n            <thead>\n                <tr>${n.map((n=>`<th>${n}</th>`)).join("")}</tr>\n            </thead>\n            <tbody>\n                ${t.map((n=>`<tr>${n.map((n=>`<td>${n}</td>`)).join("")}</tr>`)).join("")}\n            </tbody>\n        </table>`}function generateServiceRevenueStats(){return`\n        <div class="col-md-6">\n            <div class="card">\n                <div class="card-header">\n                    <h5 class="mb-0">Doanh thu dịch vụ</h5>\n                </div>\n                <div class="card-body">\n                    <canvas id="serviceRevenueChart" height="250"></canvas>\n                    <div class="table-responsive mt-3">\n                        ${generateTable(["Dịch vụ","Số lượng","Doanh thu"],statisticsService.getServiceRevenue().map((n=>[n.name,n.quantity.toLocaleString("vi-VN"),new Intl.NumberFormat("vi-VN").format(n.revenue)+"đ"])))}\n                    </div>\n                </div>\n            </div>\n        </div>`}function generateStatsCard(n,t,a,s){return`\n        <div class="container">\n            <h2 class="mb-4">${n}</h2>\n            <div class="card mb-4">\n                <div class="card-header d-flex justify-content-between align-items-center">\n                    <h5 class="mb-0">${t}</h5>\n                    ${generateTimeFilterButtons()}\n                </div>\n                <div class="card-body">\n                    <canvas id="${a}" height="150"></canvas>\n                    <div class="table-responsive mt-3">${s}</div>\n                </div>\n            </div>\n        </div>`}export function renderStatsCustomer(){return setTimeout((()=>{initCharts()}),100),`\n        <div class="container">\n            <h2 class="mb-4">Thống kê theo khách hàng và doanh thu dịch vụ</h2>\n            <div class="row mb-4">\n                ${generateCustomerStats()}\n                ${generateServiceRevenueStats()}\n            </div>\n        </div>`}function generateQuickStats(){const n=statisticsService.getDailyStats(),t=statisticsService.getMonthlyStats();return`\n        <div class="row mb-4">\n            ${[{title:"Vé bán trong ngày",value:`${n.ticketsSold.toLocaleString("vi-VN")} vé`,change:`↑ ${n.compareYesterday.ticketsSold}%`,color:"bg-primary"},{title:"Vé bán trong tháng",value:`${t.ticketsSold.toLocaleString("vi-VN")} vé`,change:`↑ ${t.compareLastMonth.ticketsSold}%`,color:"bg-success"},{title:"Khách hàng mới",value:`${n.newCustomers} khách`,note:"Trong ngày",color:"bg-info"},{title:"Tổng doanh thu",value:`${new Intl.NumberFormat("vi-VN").format(t.totalRevenue)}đ`,note:"Trong tháng",color:"bg-warning"}].map((n=>`\n                <div class="col-md-3">\n                    <div class="card">\n                        <div class="card-header ${n.color} text-white">${n.title}</div>\n                        <div class="card-body">\n                            <h3>${n.value}</h3>\n                            <p class="mb-0">${n.change||n.note}</p>\n                        </div>\n                    </div>\n                </div>`)).join("")}\n        </div>`}function generateReportSection(){return'\n        <div class="card">\n            <div class="card-header">\n                <h5 class="mb-0">Xuất báo cáo</h5>\n            </div>\n            <div class="card-body">\n                <form class="row g-3">\n                    <div class="col-md-4">\n                        <label class="form-label">Loại báo cáo</label>\n                        <select class="form-select">\n                            <option>Doanh thu theo phim</option>\n                            <option>Thống kê khách hàng</option>\n                            <option>Doanh thu dịch vụ</option>\n                            <option>Báo cáo tổng hợp</option>\n                        </select>\n                    </div>\n                    <div class="col-md-3">\n                        <label class="form-label">Từ ngày</label>\n                        <input type="date" class="form-control">\n                    </div>\n                    <div class="col-md-3">\n                        <label class="form-label">Đến ngày</label>\n                        <input type="date" class="form-control">\n                    </div>\n                    <div class="col-md-2">\n                        <label class="form-label">&nbsp;</label>\n                        <button type="button" class="btn btn-primary w-100">\n                            <i class="fas fa-download"></i> Xuất báo cáo\n                        </button>\n                    </div>\n                </form>\n            </div>\n        </div>'}export function renderStats(){return setTimeout((()=>{initCharts()}),100),`\n        <div class="container">\n            ${generateQuickStats()}\n            ${renderStatsMovie()}\n            ${renderStatsCustomer()}\n            ${renderStatsTicket()}\n            ${generateReportSection()}\n        </div>\n        <script>\n            (async () => {\n                await new Promise(resolve => setTimeout(resolve, 1000));\n                initCharts();\n            })();\n        <\/script>`}export function renderStatsMovie(){setTimeout((()=>{initCharts()}),100);return generateStatsCard("Thống kê theo phim","Doanh thu theo phim","movieRevenueChart",generateTable(["Phim","Số vé","Doanh thu vé","Doanh thu dịch vụ","Tổng doanh thu"],statisticsService.getMovieRevenue().map((n=>[n.title,n.ticketsSold.toLocaleString("vi-VN"),new Intl.NumberFormat("vi-VN").format(n.ticketRevenue)+"đ",new Intl.NumberFormat("vi-VN").format(n.serviceRevenue)+"đ",new Intl.NumberFormat("vi-VN").format(n.totalRevenue)+"đ"]))))}export function renderStatsTicket(){setTimeout((()=>{initCharts()}),100);return generateStatsCard("Thống kê vé xem phim","Doanh thu vé xem phim","ticketTrendChart",generateTable(["Ngày","Số vé","Doanh thu"],statisticsService.getDailyHistory().map((n=>({date:new Date(n.date).toLocaleDateString("vi-VN"),tickets:n.ticketsSold,revenue:n.revenue}))).map((n=>[n.date,n.tickets.toLocaleString("vi-VN")+" vé",new Intl.NumberFormat("vi-VN").format(n.revenue)+"đ"]))))}